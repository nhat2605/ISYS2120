{% include 'top.html' %}
<!DOCTYPE html>
<html>
<head>
    <title>Add Card</title>
</head>
<body onload="setMinDate()">

    <div class="content">
        <div class="container details">

            <h2 class="title"> Add Card </h2>

            <form class="Add" method="POST" action="{{url_for('add_card')}}">

                <label for="cardtypeid">Card Type:</label>
                <select id="cardtypeid" name="cardtypeid">
                    {% for type in cardtypes %}
                        <option value="{{type['cardtypeid']}}">{{type['typename']}}</option>
                    {% endfor %}
                </select>
                <br/>

                <label for="userid">User:</label>
                <select id="userid" name="userid">
                    {% for user in users %}
                        <option value="{{user['userid']}}">{{user['firstname']}} {{user['lastname']}}</option>
                    {% endfor %}
                </select>
                <br/>

                <label for="expiry">Expiry Date:</label>
                <input type="date" id="expiry" name="expiry" placeholder="Enter expiry date here">
                <br/>

                <label for="balance">Balance:</label>
                <input type="number" id="balance" name="balance" placeholder="Enter balance here">
                <br/>

                <button class="pure-button pure-button-primary" type="submit">Add</button>
            </form>

        </div>
    </div>

    <script>
        // Function to set the minimum date to today
        function setMinDate() {
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0
            var yyyy = today.getFullYear();

            today = yyyy + '-' + mm + '-' + dd;
            document.getElementById("expiry").min = today;
        }
    </script>

</body>
</html>
